//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  email String [unique, not null]
  phone String [unique]
  password String [not null]
  name String [not null]
  groupUserId String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  media Media [not null]
  userGroups UserGroup [not null]
  role UserRole [not null]
  refreshTokens RefreshToken [not null]
  devices Device [not null]
}

Table Group {
  id String [pk]
  name String [unique, not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  permissions GroupPermission [not null]
  users UserGroup [not null]
}

Table Permission {
  id String [pk]
  entityName String [not null]
  permissionType PermissionType [not null]
  createdAt DateTime [default: `now()`, not null]
  disabled Boolean [not null, default: false]
  groupPermissions GroupPermission [not null]
}

Table UserGroup {
  user User [not null]
  userId String [not null]
  group Group [not null]
  groupId String [not null]

  indexes {
    (userId, groupId) [pk]
  }
}

Table GroupPermission {
  group Group [not null]
  groupId String [not null]
  permission Permission [not null]
  permissionId String [not null]

  indexes {
    (groupId, permissionId) [pk]
  }
}

Table RefreshToken {
  id String [pk]
  token String [unique, not null]
  userId String [not null]
  user User [not null]
  deviceId String [not null]
  device Device [not null]
  publicKey String
  expiresAt DateTime [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Device {
  id String [pk]
  name String [not null]
  userId String [not null]
  user User [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  refreshToken RefreshToken [not null]
}

Table Coordinate {
  id String [pk]
  latitude Float [not null]
  longitude Float [not null]
  rescueForces RescueForce [not null]
  disasters Disaster [not null]
  media Media [not null]
}

Table Disaster {
  id String [pk]
  name String [not null]
  address String
  time DateTime [not null]
  info String [not null]
  description String
  disasterType DisasterType [not null]
  disasterTypeId String [not null]
  priorityLevel PriorityLevel [not null]
  priorityLevelId String [not null]
  emergencyLevel EmergencyLevel [not null]
  emergencyLevelId String [not null]
  coordinates Coordinate [not null]
  coordinatesId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  zone Zone [not null]
  media Media [not null]
  dataFields DataFieldOnRescueForce [not null]
  rescueForces RescueForceOnDisaster [not null]
}

Table DisasterType {
  id String [pk]
  name String [unique, not null]
  description String
  disasters Disaster [not null]
}

Table Media {
  id String [pk]
  url String [not null]
  mediaType MediaType [not null]
  user User [not null]
  userId String [not null]
  disaster Disaster [not null]
  disasterId String [not null]
  coordinates Coordinate [not null]
  coordinatesId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table PriorityLevel {
  id String [pk]
  name String [not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  disasters Disaster [not null]
}

Table EmergencyLevel {
  id String [pk]
  name String [not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  disasters Disaster [not null]
}

Table Zone {
  id String [pk]
  name String [not null]
  description String
  boundary Json [not null, note: 'A JSON field to store boundary coordinates (polygon data)']
  disaster Disaster [not null]
  disasterId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Province {
  id String [pk]
  name String [not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  district District [not null]
}

Table District {
  id String [pk]
  name String [not null]
  description String
  province Province [not null]
  provinceId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  commune Commune [not null]
}

Table Commune {
  id String [pk]
  name String [not null]
  description String
  district District [not null]
  districtId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table RescueForce {
  id String [pk]
  name String [not null]
  teamSize Int [not null]
  disasters RescueForceOnDisaster [not null]
  disasterId String [not null]
  coordinate Coordinate [not null]
  coordinateId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  rescueDevices RescueDevice [not null]
}

Table RescueForceOnDisaster {
  id String [pk]
  disaster Disaster [not null]
  disasterId String [not null]
  rescueForce RescueForce [not null]
  rescueForceId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]

  indexes {
    (disasterId, rescueForceId) [unique]
  }
}

Table DataField {
  id String [pk]
  code String [unique, not null]
  name String [unique, not null]
  unit String [not null]
  parentId String
  dataFieldGroup String
  description String
  disaster DataFieldOnRescueForce [not null]
}

Table DataFieldOnRescueForce {
  id String [pk]
  disaster Disaster [not null]
  disasterId String [not null]
  dataField DataField [not null]
  dataFieldId String [not null]
  value Float [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]

  indexes {
    (disasterId, dataFieldId) [unique]
  }
}

Table Organization {
  id String [pk]
  name String [unique, not null]
  address String [not null]
  parentId String
  description String
  rescueDevices RescueDevice [not null]
}

Table RescueDevice {
  id String [pk]
  name String [not null]
  rescueDeviceType RescueDeviceType [not null]
  rescueDeviceTypeId String [not null]
  organization Organization [not null]
  organizationId String [not null]
  rescueForce RescueForce [not null]
  rescueForceId String [not null]
}

Table RescueDeviceType {
  id String [pk]
  name String [not null]
  RescueDevices RescueDevice [not null]
}

Enum UserRole {
  ADMIN
  STAFF
  RESCUE_WORKER
}

Enum PermissionType {
  CREATE
  READ
  UPDATE
  DELETE
}

Enum MediaType {
  IMAGE
  VIDEO
  AUDIO
}

Ref: UserGroup.userId > User.id

Ref: UserGroup.groupId > Group.id

Ref: GroupPermission.groupId > Group.id

Ref: GroupPermission.permissionId > Permission.id

Ref: RefreshToken.userId > User.id

Ref: RefreshToken.deviceId > Device.id

Ref: Device.userId > User.id

Ref: Disaster.disasterTypeId > DisasterType.id

Ref: Disaster.priorityLevelId > PriorityLevel.id

Ref: Disaster.emergencyLevelId > EmergencyLevel.id

Ref: Disaster.coordinatesId > Coordinate.id

Ref: Media.userId > User.id

Ref: Media.disasterId > Disaster.id

Ref: Media.coordinatesId > Coordinate.id

Ref: Zone.disasterId > Disaster.id

Ref: District.provinceId > Province.id

Ref: Commune.districtId > District.id

Ref: RescueForce.coordinateId > Coordinate.id

Ref: RescueForceOnDisaster.disasterId > Disaster.id

Ref: RescueForceOnDisaster.rescueForceId > RescueForce.id

Ref: DataFieldOnRescueForce.disasterId > Disaster.id

Ref: DataFieldOnRescueForce.dataFieldId > DataField.id

Ref: RescueDevice.rescueDeviceTypeId > RescueDeviceType.id

Ref: RescueDevice.organizationId > Organization.id

Ref: RescueDevice.rescueForceId > RescueForce.id